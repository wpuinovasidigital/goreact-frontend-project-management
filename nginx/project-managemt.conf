server {
    # 1. Mendengarkan di port 80 (HTTP)
    listen 5173;
    listen [::]:5173; # Untuk IPv6

    # Ganti dengan nama domain Anda
    # server_name proyek-react-anda.com www.proyek-react-anda.com;

    # 2. Path ke folder 'dist' hasil build Vite
    # Pastikan Nginx memiliki izin baca ke direktori ini
    # root /home/goreact/app/goreact-frontend-project-management/dist;
    root /var/www/project-management;

    # 3. File index default
    index index.html index.htm;

    # 4. Blok lokasi utama (Routing SPA)
    location / {
        # Ini adalah bagian terpenting untuk SPA:
        # 1. Coba cari file yang cocok persis ($uri)
        # 2. Coba cari direktori yang cocok persis ($uri/)
        # 3. Jika gagal, fallback ke /index.html
        try_files $uri $uri/ /index.html;
    }

    # 5. Konfigurasi Caching untuk Aset Statis (Opsional, tapi Sangat Direkomendasikan)
    # Vite menghasilkan file dengan hash unik (mis: main.a1b2c3d4.js)
    # Kita bisa mengaturnya untuk di-cache selamanya oleh browser.
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
        expires 1y; # Cache selama 1 tahun
        add_header Cache-Control "public, no-transform";
    }

    # 6. Mengaktifkan Kompresi Gzip (Opsional, tapi Sangat Direkomendasikan)
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;

    # 7. Blokir akses ke file tersembunyi (seperti .git, .env)
    location ~ /\. {
        deny all;
    }
}